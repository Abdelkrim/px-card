<link rel="import" href="../polymer/polymer.html"/>

<!--
@blurb px card behavior or card api
-->

<script type="text/javascript">
    //px-card interface/behavior
    (function() {
        window.px = window.px || {};

        window.px.cardBehavior = {
            properties: {
                context: {
                    type: Object,
                    observer: '_contextChanged'
                },
                type: {
                    type: String,
                    observer: '_typeChanged'

                }
            },
            _contextChanged: function(newContext, oldContext) {
                if (this.contextChanged && typeof this.contextChanged === 'function') {
                    this.contextChanged(newContext, oldContext);
                }
            },
            _refresh: function() {
                if (this.refresh && typeof this.refresh === 'function') {
                    this.refresh();
                }
            },
            _typeChanged: function() {
                var self = this;
                Polymer.dom(this.root).querySelectorAll('px-card').forEach(function(pxCard) {
                    if (pxCard.type === self.type) {
                        pxCard.setAttribute('style', 'display:block');
                    }
                    else {
                        pxCard.setAttribute('style', 'display:none');
                    }
                });
            },
            ready: function() {
                this.addEventListener('px-card-refresh', this._refresh);
            }
        };
    })();
</script>

