<!doctype html>

<html>
<head>
    <title>px-card Demo</title>

    <!-- Requires Webcomponents.js polyfill is provided by the page for browsers that don't support html imports -->
    <script src="../webcomponentsjs/webcomponents.js"></script>
    <script src="../es6-promise/dist/es6-promise.min.js"></script>
    <script src="../px/dist/px.min.js"></script>
    <!-- Import custom element. Note: see comment about relative paths to dependencies in the *.html file referenced below -->

  <link rel="import" href="px-deck.html"/>
  <link rel="import" href="px-card.html"/>

    <link rel="import" href="demo-card.html"/>
    <link rel="import" href="sample-card.html"/>
    <link rel="import" href="sample-card2.html"/>
    <link rel="import" href="time-series-card.html"/>
    <link rel="import" href="widget-to-widget-card.html"/>
    <link rel="import" href="temperature-card.html"/>
    <link rel="import" type="css" href="../px-theme/px-app.html"/>

    <style>
        html {
          background-color: #E8E8E8 !important;
        }
    </style>
</head>

<body>

    <h3>Demo</h3>

    <p>
        Although related, examples are /not/ the same as the test fixtures.
        Tests are tests, examples are examples.
    </p>

    <p>
        Also see the <a href="index.html">documentation</a> and the <a href="test/fixture.html">UI test fixture</a>.
    </p>
    <time-series-card id="my-ts-card"></time-series-card>
    <widget-to-widget-card id="w2wcard"></widget-to-widget-card>
    <sample-card id="my-card"></sample-card>

    <div>
        <h3>Card to Card communication</h3>
        <px-deck id="my-deck">
            <sample-card id="sample-card-1"></sample-card>
            <sample-card id="sample-card-2"></sample-card>
        </px-deck>

        <h3>Add/Remove cards from deck</h3>
        <button onclick="addCard()">Add sample-card to my-deck</button>
        <button onclick="removeCard()">Remove card sample-card-1</button>
    </div>

    <div>
        <h3>Show/Hide card</h3>
        <demo-card id="my-demo-card"></demo-card>
        <button onclick="showCard()">Show demo card</button>
        <button onclick="hideCard()">Hide demo card</button>
    </div>

    <h3>Another example of card to Card communication</h3>
    <px-deck id="decka">
        <sample-card id="a1"></sample-card>
        <sample-card id="a2"></sample-card>
        <sample-card2 id="a3"></sample-card2>
        <sample-card2 id="a4"></sample-card2>
    </px-deck>

    <h3>Temperature Conversion Card</h3>
    <div>
        <temperature-card id="temp-conv-card"></temperature-card>
    </div>

    <script>

        addCard = function () {
            document.querySelector('#my-deck').addCard('sample-card', new Date().getTime());
        };

        removeCard = function () {
            document.querySelector('#my-deck').removeCardById('sample-card-1');
        };

        showCard = function () {
            document.querySelector('#my-demo-card').showCard();
        };

        hideCard = function () {
            document.querySelector('#my-demo-card').hideCard();
        };

        //px dealer implementation without angular
        window.px.dealer = {
            getData: function (url) {
                return new Promise(function (resolve, reject) {
                    resolve([
                        {
                            "sample_size": 1071,
                            "results": [
                                {
                                    "name": "Winter 1970-1971",
                                    "values": [
                                        [
                                            25833600000,
                                            0
                                        ],
                                        [
                                            27043200000,
                                            0.6
                                        ],
                                        [
                                            27734400000,
                                            0.7
                                        ],
                                        [
                                            28944000000,
                                            0.8
                                        ]
                                    ]
                                },
                                {
                                    "name": "Winter 1971-1972",
                                    "values": [
                                        [
                                            25833600000,
                                            2
                                        ],
                                        [
                                            27043200000,
                                            3
                                        ],
                                        [
                                            27734400000,
                                            5
                                        ],
                                        [
                                            28944000000,
                                            2
                                        ]
                                    ]
                                },
                                {
                                    "name": "Winter 1973-1974",
                                    "values": [
                                        [
                                            25833600000,
                                            5
                                        ],
                                        [
                                            27043200000,
                                            4
                                        ],
                                        [
                                            27734400000,
                                            2
                                        ],
                                        [
                                            28944000000,
                                            0
                                        ]
                                    ]
                                }
                            ]
                        }
                    ]);
                });
            }
        };

        document.addEventListener('WebComponentsReady', function(){
          document.querySelector('time-series-card').init();

          document.querySelector('#my-card').context = {
            name: 'Turbine72384'
          };

          document.querySelector('#my-deck').context = {
            name: 'Turbine72384'
          };
        });

    </script>

</body>
</html>
