sudo: required
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
env:
  global:
  - secure: D490u3uoAtQkY6EAlRUfyMezDvrY8zu5CQinAfYzS36jJiEfHhnPsq7BA/VVN97vAB1wPK2+1bqYOz9M3AfdObbBihsI3X2yzoid1uoogNhWrky8SEjooORx5Y2NwMMmhol7gtXo44AILSBGpZjCbiug27S2/itXt6YeOKZe3wuYSMTMAim9+xFh/HB0aASZJJv85VRqSUxMqCmrGzDRLcODwH/3cFunsQ9GyZTJn2zMDX8zMCVndm++ZlVkwbpb0cXMKKM5tu6xSDi8CNJ841oDJuYmh67lqjDyoFBRXRwnj2tFYJXDKMeNM5uwXsTP6vg6B3He9xyyJIfcKHHPCrEzM1vLvKuU874sTP2NPfDiYykYYxCpLQNHPspTKo2IgpX/M2zxK3twVXkPHrHpV22cwpMI3TkKwnnUAvNRZejcTTQ3CvRi7v02F3iDladz2pbw6Hvo/fszssZGlNHtk2eSX6jE2U3C0FPCpZ5R93MFoL3B2WBEwKbwqT7s7Od9moJUBwXd9MTmukzmYBzG3b61tku5N18iykNlP6cLN4W2CamR7v5cV7VpGAUXW9UUoMoUTnMFHW9ERMZjrN/EkSul/l0A/V+BYX1cVOCzrHOxCOA1UxgI2HsfFIKYXx6wbV6s995jc9kZ/xt0wJs2WahxKschSthXpUKETP0VZ+8=
  - secure: XAUgEP2vcaNHpoaiSnsSOk9SvH7aK/sdOafAg12sjoLXIbyEMK2Oc4WYjVFsgFin6/Bc9V9ZlmTXQTw/hrr3zwb7zMlvxKE64y3mWYIHPfIgi6OqnFmxFPgrw/6Lx39mO2WOFLbONv+2G/6cOqJl4uzvMaUsUaTn1FKh71ZB0bPSlAVpQISr0Qs9MKryzztwIziTR0ny+Bnk1+Cy7HPRtHNwX4/9VlKFKeTCdSSDORbY/1k1KSj5HFXPNjexyiV4QHDzXspVIJ6gWoSlVoL3Mx5L+WOMu1Bj3STXaUkWi5D4sDgMsuzVVJKxW55+lzVGol5Jvu6GjS7oqrr5t3RkcFBVybZW62oJAQtULObcvtP4qTP11u6LbHhvNS6Tl1AdpoGSDllwvi+lVabx9+HCIr1LI43cfLsV2uvxL4TO8Lgup/Y/c4X5bO7eHJ5pfGlFvhjFnDCOzQFi+PXP4p2PrbmjSvY8AQ4W7ZHrqbHVfSUvo6VIBkV3fN9Pc9p7SZ9fRQWxhlMnSQY024QYeIeOQSGwZs+/VvumKGk7nbp1+krvovK516A46PVXSaNGYi5ihz1q9R8+CY1XgR34Y4VR3SKOHyUQqGJz0Yyq1uuRWedqHNAqC/uEh7ttNHP4EzSsm6EmG2wOj487okhZVN8jUTUm9CDvotu+Jl379BiUKN4=
before_install:
  - openssl aes-256-cbc -k "$password" -in id_rsa.enc -out deploy_key -d
after_success:
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
