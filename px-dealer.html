<script type="text/javascript">
    (function(){
        window.px = window.px || {};
        //angular implementatio pf px-dealer
        window.px.dealer = {
            getData: function(url) {
                if (window.angular) {
                    //throw 'angular is missing';
                    var $http = angular.element('body').injector().get("$http");

                    return new Promise(function(resolve, reject) {
                        $http.get(url).
                                success(function(data, status, headers, config) {
                                    resolve(data);
                                }).
                                error(function(data, status, headers, config) {
                                    reject(data);
                                });
                    });
                }
            },
            init: function() {
                this.deckDefinitions = {
                    'sample-cards': {
                        name: 'SampleCards',
                        url: 'views/sample-cards.html'
                    },
                    'fetch-data': {
                        name: 'FetchData',
                        url: 'views/fetch-data.html'
                    },
                    'card-to-card': {
                        name: 'CardToCard',
                        url: 'views/card-to-card.html'
                    }
                };

                this.decksByClassification = {
                    'farmEquipment': ['sample-cards', 'fetch-data'],
                    'turbine': ['card-to-card']
                };
            },
            getDecksByClassification: function(classification) {
                var decks = [];
                var self = this;
                this.decksByClassification[classification].forEach(function(deckId){
                    decks.push(self.deckDefinitions[deckId]);
                });
                return decks;
            }
        };
    })();
</script>
